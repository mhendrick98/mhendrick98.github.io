<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Day Schedule Selector Example</title>
</head>

<style>
  .schedule-rows td {
    width: 80px;
    height: 30px;
    margin: 3px;
    padding: 5px;
    background-color: #eee;
    cursor: pointer;
  }
  .schedule-rows td:first-child {
    background-color: transparent;
    text-align: right;
    position: relative;
    top: -12px;
  }
  .schedule-rows td[data-selected],
  .schedule-rows td[data-selecting] {
    background-color: #6a0bc1;
  }
  .schedule-rows td[data-disabled] {
    opacity: 0.55;
  }
</style>

<body>

  <div id="day-schedule"></div>

  <script
    src="https://code.jquery.com/jquery-1.11.2.min.js"
    integrity="sha256-Ls0pXSlb7AYs7evhd+VLnWsZ/AqEHcXBeMZUycz/CcA="
    crossorigin="anonymous"></script>


    <script src="./picker.js"></script>

    <br>
    <br>

    <button type="button" id="confirmPicks">Click to confirm Schedule!</button>

    <h3 id="updateMe">Schedule here </h3>



  <script>
    (function ($) {

      var dict = {
        "1": [],
        "2": [],
        "3": [],
        "4": [],
        "5": [],
        "6": []
      };

      $("#day-schedule").dayScheduleSelector({

        days: [1, 2, 3, 4, 5, 6, 7],
        interval: 30,
        startTime: '09:00',
        endTime: '21:00'
      });
      $("#day-schedule").on('selected.artsy.dayScheduleSelector', function (e, selected) {
        var i;
        for (i = 0; i < selected.length; i ++){
          // console.log(selected[i]);
          // console.log(selected[selected.length - 1]);
          var currTime = selected[i].getAttribute("data-time");
          var currDay = selected[i].getAttribute("data-day");
          // console.log(currDay);
          // console.log(currTime);
          // console.log(typeof currDay);
          // console.log(typeof currTime);

          // dict[currDay].push(currTime);
          // console.log(dict);
        }
        });


      $("#confirmPicks").click(function (){
        var currLayout = $("#day-schedule").data('artsy.dayScheduleSelector').serialize();
        var i;
        var res = "";
        var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
        for(i = 1; i < 8; i++){
          console.log(currLayout[i]);
          if (currLayout[i] === undefined || currLayout[i].length == 0) {
              continue;
          } else {
            res += days[i - 1] + ": ";
            var j;
            for(j = 0; j < currLayout[i].length; j++){
              res += currLayout[i][j][0] + " - " + currLayout[i][j][1];
              res += " ";
            }
            res += "<br>";
          }
        }
        console.log(res);
        $("#updateMe").html(res);
      });

    })($);
  </script>

</body>
</html>
